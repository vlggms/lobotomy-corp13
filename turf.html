<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="dmdoc.css"><title>/turf - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="turf.html#var">Var Details</a> - <a href="turf.html#proc">Proc Details</a></header><main><h1>turf <aside>/<a href="turf.html">turf</a></aside><aside> inherits /<a href="atom.html">atom</a></aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L4"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 4"></a></h1><p>Any floor or wall. What makes up the station and the rest of the map.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="turf.html#var/affecting_lights">affecting_lights</a></th><td>List of light sources affecting this turf.</td></tr><tr><th><a href="turf.html#var/atmos_adjacent_turfs">atmos_adjacent_turfs</a></th><td>list of turfs adjacent to us that air can flow onto</td></tr><tr><th><a href="turf.html#var/atmos_supeconductivity">atmos_supeconductivity</a></th><td>bitfield of dirs in which we are superconducitng</td></tr><tr><th><a href="turf.html#var/directional_opacity">directional_opacity</a></th><td>Which directions does this turf block the vision of, taking into account both the turf's opacity and the movable opacity_sources.</td></tr><tr><th><a href="turf.html#var/dynamic_lumcount">dynamic_lumcount</a></th><td>Lumcount added by sources other than lighting datum objects, such as the overlay lighting component.</td></tr><tr><th><a href="turf.html#var/fixed_underlay">fixed_underlay</a></th><td>Icon-smoothing variable to map a diagonal wall corner with a fixed underlay.</td></tr><tr><th><a href="turf.html#var/holodeck_compatible">holodeck_compatible</a></th><td>the holodeck can load onto this turf if TRUE</td></tr><tr><th><a href="turf.html#var/lighting_object">lighting_object</a></th><td>Our lighting object.</td></tr><tr><th><a href="turf.html#var/opacity_sources">opacity_sources</a></th><td>Lazylist of movable atoms providing opacity sources.</td></tr><tr><th><a href="turf.html#var/turf_flags">turf_flags</a></th><td>Turf bitflags, see code/__DEFINES/flags.dm</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="turf.html#proc/Initialize">Initialize</a></th><td>Turf Initialize</td></tr><tr><th><a href="turf.html#proc/add_opacity_source">add_opacity_source</a></th><td>Proc to add movable sources of opacity on the turf and let it handle lighting code.</td></tr><tr><th><a href="turf.html#proc/air_update_turf">air_update_turf</a></th><td>A helper proc for dealing with atmos changes</td></tr><tr><th><a href="turf.html#proc/conductivity_directions">conductivity_directions</a></th><td>SUPERCONDUCTIVITY
ALLLLLLLLLLLLLLLLLLLLRIGHT HERE WE GOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO</td></tr><tr><th><a href="turf.html#proc/consider_superconductivity">consider_superconductivity</a></th><td>Should we attempt to superconduct?</td></tr><tr><th><a href="turf.html#proc/expose_reagents">expose_reagents</a></th><td>Handles exposing a turf to reagents.</td></tr><tr><th><a href="turf.html#proc/fromShuttleMove">fromShuttleMove</a></th><td>Base procs</td></tr><tr><th><a href="turf.html#proc/is_blocked_turf">is_blocked_turf</a></th><td>Check whether the specified turf is blocked by something dense inside it with respect to a specific atom.</td></tr><tr><th><a href="turf.html#proc/is_blocked_turf_ignore_climbable">is_blocked_turf_ignore_climbable</a></th><td>Checks whether the specified turf is blocked by something dense inside it, but ignores anything with the climbable trait</td></tr><tr><th><a href="turf.html#proc/is_nearby_planetary_atmos">is_nearby_planetary_atmos</a></th><td>Runs through all adjacent open turfs and checks if any are planetary_atmos returns true if even one passes.</td></tr><tr><th><a href="turf.html#proc/neighbor_conduct_with_src">neighbor_conduct_with_src</a></th><td>These two procs are a bit of a web, I belive in you</td></tr><tr><th><a href="turf.html#proc/recalculate_directional_opacity">recalculate_directional_opacity</a></th><td>Calculate on which directions this turfs block view.</td></tr><tr><th><a href="turf.html#proc/remove_opacity_source">remove_opacity_source</a></th><td>Proc to remove movable sources of opacity on the turf and let it handle lighting code.</td></tr><tr><th><a href="turf.html#proc/return_turf_delta_p">return_turf_delta_p</a></th><td>Finds the greatest difference in pressure across a turf, only considers open turfs.</td></tr><tr><th><a href="turf.html#proc/wash">wash</a></th><td>Called when this turf is being washed. Washing a turf will also wash any mopable floor decals</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/affecting_lights"><aside class="declaration">var </aside>affecting_lights <aside>– /tmp/list/datum/light_source</aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L51"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 51"></a></h3><p>List of light sources affecting this turf.</p><h3 id="var/atmos_adjacent_turfs"><aside class="declaration">var </aside>atmos_adjacent_turfs <aside>– /list</aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/atmospherics/environmental/LINDA_turf_tile.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/environmental/LINDA_turf_tile.dm 8"></a></h3><p>list of turfs adjacent to us that air can flow onto</p><h3 id="var/atmos_supeconductivity"><aside class="declaration">var </aside>atmos_supeconductivity <aside>– </aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/atmospherics/environmental/LINDA_turf_tile.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/environmental/LINDA_turf_tile.dm 10"></a></h3><p>bitfield of dirs in which we are superconducitng</p><h3 id="var/directional_opacity"><aside class="declaration">var </aside>directional_opacity <aside>– </aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L57"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 57"></a></h3><p>Which directions does this turf block the vision of, taking into account both the turf's opacity and the movable opacity_sources.</p><h3 id="var/dynamic_lumcount"><aside class="declaration">var </aside>dynamic_lumcount <aside>– </aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L44"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 44"></a></h3><p>Lumcount added by sources other than lighting datum objects, such as the overlay lighting component.</p><h3 id="var/fixed_underlay"><aside class="declaration">var </aside>fixed_underlay <aside>– /list</aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L41"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 41"></a></h3><p>Icon-smoothing variable to map a diagonal wall corner with a fixed underlay.</p><h3 id="var/holodeck_compatible"><aside class="declaration">var </aside>holodeck_compatible <aside>– </aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L62"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 62"></a></h3><p>the holodeck can load onto this turf if TRUE</p><h3 id="var/lighting_object"><aside class="declaration">var </aside>lighting_object <aside>– /tmp/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/lighting_object.html">lighting_object</a></aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L53"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 53"></a></h3><p>Our lighting object.</p><h3 id="var/opacity_sources"><aside class="declaration">var </aside>opacity_sources <aside>– /list/atom/movable</aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L59"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 59"></a></h3><p>Lazylist of movable atoms providing opacity sources.</p><h3 id="var/turf_flags"><aside class="declaration">var </aside>turf_flags <aside>– </aside> <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L9"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 9"></a></h3><p>Turf bitflags, see code/__DEFINES/flags.dm</p><h2 id="proc">Proc Details</h2><h3 id="proc/Initialize"><aside class="parent"><a title="/atom" href="atom.html#proc/Initialize">↑</a></aside>Initialize<aside>(mapload)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L75"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 75"></a></aside></h3><p>Turf Initialize</p>
<p>Doesn't call parent, see <a href="atom.html#proc/Initialize" title="/atom">/atom/proc/Initialize</a></p><h3 id="proc/add_opacity_source"><aside class="declaration">proc </aside>add_opacity_source<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/new_source)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/lighting/lighting_turf.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 82"></a></aside></h3><p>Proc to add movable sources of opacity on the turf and let it handle lighting code.</p><h3 id="proc/air_update_turf">air_update_turf<aside>(update, remove)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/atmospherics/environmental/LINDA_system.dm#L116"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/environmental/LINDA_system.dm 116"></a></aside></h3><p>A helper proc for dealing with atmos changes</p>
<p>Ok so this thing is pretty much used as a catch all for all the situations someone might wanna change something
About a turfs atmos. It's real clunky, and someone needs to clean it up, but not today.
Arguments:</p>
<ul>
<li>update - Has the state of the structures in the world changed? If so, update our adjacent atmos turf list, if not, don't.</li>
<li>remove - Are you removing an active turf (Read wall), or adding one</li>
</ul><h3 id="proc/conductivity_directions"><aside class="declaration">proc </aside>conductivity_directions<aside>()  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/atmospherics/environmental/LINDA_turf_tile.dm#L538"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/environmental/LINDA_turf_tile.dm 538"></a></aside></h3><p>SUPERCONDUCTIVITY
ALLLLLLLLLLLLLLLLLLLLRIGHT HERE WE GOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO</p>
<p>Read the code for more details, but first, a brief concept discussion/area</p>
<p>Our goal here is to &quot;model&quot; heat moving through solid objects, so walls, windows, and sometimes doors.
We do this by heating up the floor itself with the heat of the gasmix ontop of it, this is what the coeffs are for here, they slow that movement
Then we go through the process below.</p>
<p>If an active turf is fitting, we add it to processing, conduct with any covered tiles, (read windows and sometimes walls)
Then we space some of our heat, and think about if we should stop conducting.</p><h3 id="proc/consider_superconductivity"><aside class="declaration">proc </aside>consider_superconductivity<aside>(starting)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/atmospherics/environmental/LINDA_turf_tile.dm#L608"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/environmental/LINDA_turf_tile.dm 608"></a></aside></h3><p>Should we attempt to superconduct?</p><h3 id="proc/expose_reagents"><aside class="parent"><a title="/atom" href="atom.html#proc/expose_reagents">↑</a></aside>expose_reagents<aside>(/list/reagents, /<a href="datum.html">datum</a>/<a href="datum/reagents.html">reagents</a>/source, methods, volume_modifier, show_message)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L621"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 621"></a></aside></h3><p>Handles exposing a turf to reagents.</p><h3 id="proc/fromShuttleMove"><aside class="declaration">proc </aside>fromShuttleMove<aside>(/<a href="turf.html">turf</a>/newT, move_mode)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/shuttle/on_move.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/shuttle/on_move.dm 9"></a></aside></h3><p>Base procs</p><h3 id="proc/is_blocked_turf"><aside class="declaration">proc </aside>is_blocked_turf<aside>(exclude_mobs, source_atom, /list/ignore_atoms)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L184"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 184"></a></aside></h3><p>Check whether the specified turf is blocked by something dense inside it with respect to a specific atom.</p>
<p>Returns truthy value TURF_BLOCKED_TURF_DENSE if the turf is blocked because the turf itself is dense.
Returns truthy value TURF_BLOCKED_CONTENT_DENSE if one of the turf's contents is dense and would block
a source atom's movement.
Returns falsey value TURF_NOT_BLOCKED if the turf is not blocked.</p>
<p>Arguments:</p>
<ul>
<li>exclude_mobs - If TRUE, ignores dense mobs on the turf.</li>
<li>source_atom - If this is not null, will check whether any contents on the turf can block this atom specifically. Also ignores itself on the turf.</li>
<li>ignore_atoms - Check will ignore any atoms in this list. Useful to prevent an atom from blocking itself on the turf.</li>
</ul><h3 id="proc/is_blocked_turf_ignore_climbable"><aside class="declaration">proc </aside>is_blocked_turf_ignore_climbable<aside>()  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L206"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 206"></a></aside></h3><p>Checks whether the specified turf is blocked by something dense inside it, but ignores anything with the climbable trait</p>
<p>Works similar to is_blocked_turf(), but ignores climbables and has less options. Primarily added for jaunting checks</p><h3 id="proc/is_nearby_planetary_atmos"><aside class="declaration">proc </aside>is_nearby_planetary_atmos<aside>()  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/swarmers/swarmer_act.dm#L24"><img src="git.png" width="16" height="16" title="code/modules/swarmers/swarmer_act.dm 24"></a></aside></h3><p>Runs through all adjacent open turfs and checks if any are planetary_atmos returns true if even one passes.</p><h3 id="proc/neighbor_conduct_with_src"><aside class="declaration">proc </aside>neighbor_conduct_with_src<aside>(/<a href="turf.html">turf</a>/<a href="turf/open.html">open</a>/other)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/atmospherics/environmental/LINDA_turf_tile.dm#L553"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/environmental/LINDA_turf_tile.dm 553"></a></aside></h3><p>These two procs are a bit of a web, I belive in you</p><h3 id="proc/recalculate_directional_opacity"><aside class="declaration">proc </aside>recalculate_directional_opacity<aside>()  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/lighting/lighting_turf.dm#L98"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 98"></a></aside></h3><p>Calculate on which directions this turfs block view.</p><h3 id="proc/remove_opacity_source"><aside class="declaration">proc </aside>remove_opacity_source<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/old_source)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/lighting/lighting_turf.dm#L90"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 90"></a></aside></h3><p>Proc to remove movable sources of opacity on the turf and let it handle lighting code.</p><h3 id="proc/return_turf_delta_p"><aside class="declaration">proc </aside>return_turf_delta_p<aside>()  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/modules/swarmers/swarmer_act.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/swarmers/swarmer_act.dm 11"></a></aside></h3><p>Finds the greatest difference in pressure across a turf, only considers open turfs.</p><h3 id="proc/wash"><aside class="parent"><a title="/atom" href="atom.html#proc/wash">↑</a></aside>wash<aside>(clean_types)  <a href="https://github.com/vlggms/lobotomy-corp13/blob/8096f0d29dfb1940687b51a76bdde0e8dce708d2/code/game/turfs/turf.dm#L634"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 634"></a></aside></h3><p>Called when this turf is being washed. Washing a turf will also wash any mopable floor decals</p></main><footer>lobotomy-corp13.dme <a href="https://github.com/vlggms/lobotomy-corp13/tree/8096f0d29dfb1940687b51a76bdde0e8dce708d2">8096f0d</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>